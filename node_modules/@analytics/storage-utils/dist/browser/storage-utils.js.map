{"version":3,"file":"storage-utils.js","sources":["../../../analytics-util-types/dist/analytics-util-types.module.js","../../../analytics-util-storage-global/dist/analytics-util-global-storage.module.js","../../../analytics-util-storage-cookie/dist/analytics-util-cookie.module.js","../../../analytics-util-storage-local/dist/analytics-util-localstorage.module.js","../../../analytics-util-storage-session/dist/analytics-util-session-storage.module.js","../../src/utils/parse.js","../../src/index.js"],"sourcesContent":["var n=\"function\",t=\"string\",e=\"undefined\",r=\"boolean\",o=\"object\",u=\"array\",i=\"number\",c=\"symbol\",f=\"null\",a=\"error\",s=\"typeError\",l=\"syntaxError\",d=\"asyncFunction\",p=\"generatorFunction\",y=\"asyncGeneratorFunction\",b=function(){},g=\"any\",m=\"*\",v=\"none\",h=\"hidden\",j=\"__\",O=\"form\",S=\"input\",w=\"button\",A=\"select\",E=\"change\",N=\"submit\",D=/^\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z)$/,z=/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Z=/^\\{[\\s\\S]*\\}$|^\\[[\\s\\S]*\\]$/,F=\"undefined\"!=typeof process?process:{},P=F.env&&F.env.NODE_ENV||\"\",x=\"production\"===P,C=\"staging\"===P,L=\"development\"===P,$=\"undefined\"!=typeof window,T=$&&\"localhost\"===window.location.hostname,_=null!=F.versions&&null!=F.versions.node,k=\"undefined\"!=typeof Deno&&void 0!==Deno.core,B=\"object\"==typeof self&&self.constructor&&\"DedicatedWorkerGlobalScope\"===self.constructor.name,G=$&&\"nodejs\"===window.name||\"undefined\"!=typeof navigator&&(navigator.userAgent.includes(\"Node.js\")||navigator.userAgent.includes(\"jsdom\"));function M(n,t){return t.charAt(0)[n]()+t.slice(1)}var U=M.bind(null,\"toUpperCase\"),H=M.bind(null,\"toLowerCase\");function J(n){return Y(n)?U(\"null\"):\"object\"==typeof n?yn(n):Object.prototype.toString.call(n).slice(8,-1)}function R(n,t){void 0===t&&(t=!0);var e=J(n);return t?H(e):e}function V(n,t){return typeof t===n}var W=V.bind(null,\"function\"),q=V.bind(null,\"string\"),I=V.bind(null,\"undefined\");function K(n){return!I(n)}var Q=V.bind(null,\"boolean\"),X=V.bind(null,\"symbol\");function Y(n){return null===n}function nn(n){return\"number\"===R(n)&&!isNaN(n)}function tn(n){return!isNaN(parseFloat(n))}function en(n){return!!W(n)&&/^class /.test(Function.prototype.toString.call(n))}function rn(n){return\"array\"===R(n)}function on(n){if(!un(n))return!1;for(var t=n;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t}function un(n){return n&&(\"object\"==typeof n||null!==n)}function cn(n){if(!q(n)||!Z.test(n))return!1;try{JSON.parse(n)}catch(n){return!1}return!0}function fn(n){if(Y(n))return!0;switch(typeof n){case\"string\":case\"number\":case\"symbol\":case\"undefined\":case\"boolean\":return!0;default:return!1}}function an(n,t){return on(n)&&W(n[t])}function sn(n){return!!n&&!!(!I(Promise)&&n instanceof Promise||n.then&&W(n.then))}function ln(n){return un(n)&&W(n.throw)&&W(n.return)&&W(n.next)}function dn(n){return\"generatorFunction\"===R(n)}function pn(n){return\"asyncFunction\"===R(n)}function yn(n){return W(n.constructor)?n.constructor.name:null}function bn(n){return n instanceof Set}function gn(n){return n instanceof Map}function mn(n){return n instanceof RegExp}function vn(n){return!(!n.constructor||!W(n.constructor.isBuffer))&&n.constructor.isBuffer(n)}function hn(n){return n instanceof Error||q(n.message)&&n.constructor&&nn(n.constructor.stackTraceLimit)}function jn(n){return un(n)&&q(n.message)&&q(n.name)}function On(n,t){if(\"object\"!=typeof t||Y(t))return!1;if(t instanceof n)return!0;var e=R(new n(\"\"));if(hn(t))for(;t;){if(R(t)===e)return!0;t=Object.getPrototypeOf(t)}return!1}var Sn=On.bind(null,TypeError),wn=On.bind(null,SyntaxError);function An(n){if(!W(n))return!1;var t=/{(\\r|\\n|\\s)*}/gm,e=b+\"\";return e===(n.toString().match(t)||[\"\"])[0].replace(t,e)}function En(n){try{if(nn(n.length)&&W(n.callee))return!0}catch(n){if(-1!==n.message.indexOf(\"callee\"))return!0}return!1}function Nn(n){return!(q(n)&&\"false\"===n.toLowerCase()||!n)}function Dn(n){return!n}function zn(n){return!0===n}function Zn(n){return!1===n}function Fn(n){return!(n.length>320)&&z.test(n)}function Pn(n){return n instanceof Date||W(n.toDateString)&&W(n.getDate)&&W(n.setDate)}function xn(n){return D.test(n)}function Cn(n){return!(!Y(n)&&(rn(n)?n.length:bn(n)||gn(n)?n.size:on(n)&&Object.keys(n).length))}function Ln(n){return NodeList.prototype.isPrototypeOf(n)}function $n(n,t){var e=n instanceof Element||n instanceof HTMLDocument;return e&&t?Tn(n,t):e}function Tn(n,t){return void 0===t&&(t=\"\"),n&&n.nodeName===t.toUpperCase()}function _n(n){var t=[].slice.call(arguments,1);return function(){return n.apply(void 0,[].slice.call(arguments).concat(t))}}var kn=_n($n,\"form\"),Bn=_n($n,\"button\"),Gn=_n($n,\"input\"),Mn=_n($n,\"select\");function Un(n,t){if(!n||\"hidden\"===getComputedStyle(n).visibility)return!0;for(;n;){if(null!=t&&n===t)return!1;if(\"none\"===getComputedStyle(n).display)return!0;n=n.parentElement}return!1}function Hn(n){return n?rn(n)?n:[n]:[]}export{m as ALL,g as ANY,u as ARRAY,d as ASYNC_FUNCTION,y as ASYNC_GENERATOR_FUNCTION,r as BOOLEAN,w as BUTTON,E as CHANGE,P as ENV,a as ERROR,O as FORM,n as FUNCTION,p as GENERATOR_FUNCTION,h as HIDDEN,S as INPUT,v as NONE,f as NULL,i as NUMBER,o as OBJECT,j as PREFIX,z as REGEX_EMAIL,D as REGEX_ISO,Z as REGEX_JSON,A as SELECT,t as STRING,N as SUBMIT,c as SYMBOL,l as SYNTAX_ERROR,s as TYPE_ERROR,e as UNDEFINED,yn as ctorName,Hn as ensureArray,R as getType,J as getTypeName,En as isArguments,rn as isArray,pn as isAsyncFunction,Q as isBoolean,$ as isBrowser,vn as isBuffer,Bn as isButton,en as isClass,Pn as isDate,K as isDefined,k as isDeno,L as isDev,$n as isElement,Fn as isEmail,Cn as isEmpty,hn as isError,jn as isErrorLike,Zn as isFalse,Dn as isFalsy,kn as isForm,W as isFunction,ln as isGenerator,dn as isGeneratorFunction,Un as isHidden,Gn as isInput,xn as isIsoDate,G as isJsDom,cn as isJson,T as isLocalHost,gn as isMap,an as isMethod,An as isNoOp,_ as isNode,Ln as isNodeList,Tn as isNodeType,Y as isNull,nn as isNumber,tn as isNumberLike,on as isObject,un as isObjectLike,fn as isPrimitive,x as isProd,sn as isPromise,mn as isRegex,Mn as isSelect,bn as isSet,C as isStaging,q as isString,X as isSymbol,wn as isSyntaxError,zn as isTrue,Nn as isTruthy,Sn as isTypeError,I as isUndefined,B as isWebWorker,b as noOp};\n//# sourceMappingURL=analytics-util-types.module.js.map\n","import{PREFIX as t,OBJECT as e,UNDEFINED as r}from\"@analytics/type-utils\";var l=\"global\",o=t+\"global\"+t,n=typeof self===e&&self.self===self&&self||typeof global===e&&global.global===global&&global||void 0;function a(t){return n[o][t]}function f(t,e){return n[o][t]=e}function i(t){delete n[o][t]}function u(t,e,r){var l;try{if(b(t)){var o=window[t];l=o[e].bind(o)}}catch(t){}return l||r}n[o]||(n[o]={});var c={};function b(t){if(typeof c[t]!==r)return c[t];try{var e=window[t];e.setItem(r,r),e.removeItem(r)}catch(e){return c[t]=!1}return c[t]=!0}export{l as GLOBAL,o as KEY,a as get,n as globalContext,b as hasSupport,i as remove,f as set,u as wrap};\n//# sourceMappingURL=analytics-util-global-storage.module.js.map\n","import{remove as e,set as o,get as n}from\"@analytics/global-storage-utils\";var t=\"cookie\",i=a(),r=d,c=d;function u(o){return i?d(o,\"\",-1):e(o)}function a(){if(void 0!==i)return i;var e=\"cookiecookie\";try{d(e,e),i=-1!==document.cookie.indexOf(e),u(e)}catch(e){i=!1}return i}function d(e,t,r,c,u,a){if(\"undefined\"!=typeof window){var d=arguments.length>1;return!1===i&&(d?o(e,t):n(e)),d?document.cookie=e+\"=\"+encodeURIComponent(t)+(r?\"; expires=\"+new Date(+new Date+1e3*r).toUTCString()+(c?\"; path=\"+c:\"\")+(u?\"; domain=\"+u:\"\")+(a?\"; secure\":\"\"):\"\"):decodeURIComponent(((\"; \"+document.cookie).split(\"; \"+e+\"=\")[1]||\"\").split(\";\")[0])}}export{t as COOKIE,r as getCookie,a as hasCookies,u as removeCookie,c as setCookie};\n//# sourceMappingURL=analytics-util-cookie.module.js.map\n","import{hasSupport as l,wrap as o,get as a,set as t,remove as e}from\"@analytics/global-storage-utils\";var r=\"localStorage\",g=l.bind(null,\"localStorage\"),c=o(\"localStorage\",\"getItem\",a),m=o(\"localStorage\",\"setItem\",t),S=o(\"localStorage\",\"removeItem\",e);export{r as LOCAL_STORAGE,c as getItem,g as hasLocalStorage,S as removeItem,m as setItem};\n//# sourceMappingURL=analytics-util-localstorage.module.js.map\n","import{hasSupport as e,wrap as s,get as o,set as t,remove as r}from\"@analytics/global-storage-utils\";var a=\"sessionStorage\",i=e.bind(null,\"sessionStorage\"),g=s(\"sessionStorage\",\"getItem\",o),n=s(\"sessionStorage\",\"setItem\",t),l=s(\"sessionStorage\",\"removeItem\",r);export{a as SESSION_STORAGE,g as getSessionItem,i as hasSessionStorage,l as removeSessionItem,n as setSessionItem};\n//# sourceMappingURL=analytics-util-session-storage.module.js.map\n","import { isObject } from '@analytics/type-utils'\n/**\n * Safe JSON parse\n * @param  {*} input - value to parse\n * @return {*} parsed input\n */\nexport default function parse(input) {\n  let value = input\n  try {\n    value = JSON.parse(input)\n    if (value === 'true') return true\n    if (value === 'false') return false\n    if (isObject(value)) return value\n    if (parseFloat(value) === value) {\n      value = parseFloat(value)\n    }\n  } catch (e) { }\n  if (value === null || value === \"\") {\n    return\n  }\n  return value\n}\n","import { set, get, remove, globalContext, GLOBAL } from '@analytics/global-storage-utils'\nimport { getCookie, setCookie, removeCookie, hasCookies, COOKIE } from '@analytics/cookie-utils'\nimport { hasLocalStorage, LOCAL_STORAGE } from '@analytics/localstorage-utils'\nimport { hasSessionStorage, SESSION_STORAGE } from '@analytics/session-storage-utils'\nimport { isUndefined, isString, ANY, ALL } from '@analytics/type-utils'\nimport parse from './utils/parse'\n\n// Verify support\nconst hasStorage = hasLocalStorage()\nconst hasSessionSupport = hasSessionStorage()\nconst hasCookiesSupport = hasCookies()\n\n/**\n * Get storage item from localStorage, cookie, or window\n * @param  {string} key - key of item to get\n * @param  {object|string} [options] - storage options. If string location of where to get storage\n * @param  {string} [options.storage] - Define type of storage to pull from.\n * @return {Any}  the value of key\n */\nexport function getItem(key, options) {\n  if (!key) return\n  const type = getStorageType(options)\n  const getFirst = !useAll(type)\n\n  /* 1. Try localStorage */\n  const localValue = useLocal(type) ? parse(localStorage.getItem(key)) : undefined\n  if (getFirst && !isUndefined(localValue)) {\n    return localValue\n  }\n\n  /* 2. Fallback to cookie */\n  const cookieVal = useCookie(type) ? parse(getCookie(key)) : undefined\n  if (getFirst && cookieVal) {\n    return cookieVal\n  }\n\n  /* 3. Fallback to sessionStorage */\n  const sessionVal = useSession(type) ? parse(sessionStorage.getItem(key)) : undefined\n  if (getFirst && sessionVal) {\n    return sessionVal\n  }\n\n  /* 4. Fallback to window/global. */\n  const globalValue = get(key)\n\n  return getFirst ? globalValue : {\n    localStorage: localValue,\n    sessionStorage: sessionVal,\n    cookie: cookieVal,\n    global: globalValue\n  }\n}\n\n/**\n * Store values in localStorage, cookie, or window\n * @param {string} key - key of item to set\n * @param {*} value - value of item to set\n * @param {object|string} [options] - storage options. If string location of where to get storage\n * @param {string} [options.storage] - Define type of storage to pull from.\n * @returns {object} returns old value, new values, & location of storage\n */\nexport function setItem(key, value, options) {\n  if (!key || isUndefined(value)) {\n    return\n  }\n  const data = {}\n  const type = getStorageType(options)\n  const saveValue = JSON.stringify(value)\n  const setFirst = !useAll(type)\n\n  /* 1. Try localStorage */\n  if (useLocal(type)) {\n    // console.log('SET as localstorage', saveValue)\n    data[LOCAL_STORAGE] = format(LOCAL_STORAGE, value, parse(localStorage.getItem(key)))\n    // Set LocalStorage item\n    localStorage.setItem(key, saveValue)\n    if (setFirst) {\n      return data[LOCAL_STORAGE]\n    }\n  }\n\n  /* 2. Fallback to cookie */\n  if (useCookie(type)) {\n    // console.log('SET as cookie', saveValue)\n    data[COOKIE] = format(COOKIE, value, parse(getCookie(key)))\n    // Set Cookie\n    setCookie(key, saveValue)\n    if (setFirst) {\n      return data[COOKIE]\n    }\n  }\n\n  /* 3. Try sessionStorage */\n  if (useSession(type)) {\n    // console.log('SET as localstorage', saveValue)\n    data[SESSION_STORAGE] = format(SESSION_STORAGE, value, parse(sessionStorage.getItem(key)))\n    // Set sessionStorage item\n    sessionStorage.setItem(key, saveValue)\n    if (setFirst) {\n      return data[SESSION_STORAGE]\n    }\n  }\n\n  /* 4. Fallback to window/global */\n  data[GLOBAL] = format(GLOBAL, value, get(key))\n  // Set global value\n  set(key, value)\n  // Return set value(s)\n  return (setFirst) ? data[GLOBAL] : data\n}\n\n/**\n * Remove values from localStorage, cookie, or window\n * @param {string} key - key of item to set\n * @param {object|string} [options] - storage options. If string location of where to get storage\n * @param {string} [options.storage] - Define type of storage to pull from.\n */\nexport function removeItem(key, options) {\n  if (!key) return\n  const type = getStorageType(options)\n  const values = getItem(key, ALL)\n\n  const data = {}\n  /* 1. Try localStorage */\n  if (!isUndefined(values.localStorage) && useLocal(type)) {\n    localStorage.removeItem(key)\n    data[LOCAL_STORAGE] = values.localStorage\n  }\n  /* 2. Fallback to cookie */\n  if (!isUndefined(values.cookie) && useCookie(type)) {\n    removeCookie(key)\n    data[COOKIE] = values.cookie\n  }\n  /* 3. Try sessionStorage */\n  if (!isUndefined(values.sessionStorage) && useSession(type)) {\n    sessionStorage.removeItem(key)\n    data[SESSION_STORAGE] = values.sessionStorage\n  }\n  /* 4. Fallback to window/global */\n  if (!isUndefined(values.global) && useGlobal(type)) {\n    remove(key)\n    data[GLOBAL] = values.global\n  }\n  return data\n}\n\nfunction getStorageType(opts) {\n  if (!opts) return ANY\n  return isString(opts) ? opts : opts.storage\n}\n\nfunction useGlobal(storage) {\n  return useType(storage, GLOBAL)\n}\n\nfunction useLocal(storage) {\n  // If has localStorage and storage option not defined, or is set to 'localStorage' or '*'\n  return hasStorage && useType(storage, LOCAL_STORAGE)\n}\n\nfunction useCookie(storage) {\n  // If has cookies and storage option not defined, or is set to 'cookies' or '*'\n  return hasCookiesSupport && useType(storage, COOKIE)\n}\n\nfunction useSession(storage) {\n  // If has sessionStorage and storage option not defined, or is set to 'sessionStorage' or '*'\n  return hasSessionSupport && useType(storage, SESSION_STORAGE)\n}\n\nfunction useAll(storage) {\n  return storage === ALL || storage === 'all'\n}\n\nfunction useType(storage, type) {\n  return (storage === ANY || storage === type || useAll(storage))\n}\n\n/**\n * Format response\n * @param {string} location \n * @param {*} current - current value\n * @param {*} previous - previous value\n * @returns \n */\nfunction format(location, current, previous) {\n  return { location, current, previous }\n}\n\n// const TYPES = {\n//   ALL,\n//   ANY,\n//   GLOBAL,\n//   COOKIE,\n//   LOCAL_STORAGE,\n//   SESSION_STORAGE,   \n// }\n\nexport {\n  ALL,\n  ANY,\n  GLOBAL,\n  COOKIE,\n  LOCAL_STORAGE,\n  SESSION_STORAGE,\n  getCookie,\n  setCookie,\n  removeCookie,\n  globalContext,\n  hasSessionStorage,\n  hasLocalStorage,\n  hasCookies\n}\n\nexport default {\n  setItem,\n  getItem,\n  removeItem\n}"],"names":["UNDEFINED","OBJECT","ANY","process","isBrowser","window","text","method","s","charAt","slice","Deno","name","navigator","userAgent","includes","upper","bind","lower","getType","val","toLowerCase","type","isNull","x","isFunction","constructor","ctorName","Object","prototype","toString","call","getTypeName","typeOf","kind","isString","isUndefined","errorType","ErrKind","value","typeName","Error","message","n","isNaN","isNumber","stackTraceLimit","isError","getPrototypeOf","isElement","element","isEl","Element","HTMLDocument","nodeName","toUpperCase","isNodeType","bindArgs","fn","boundArgs","TypeError","SyntaxError","GLOBAL","KEY","PREFIX","globalContext","self","global","this","get","key","set","remove","wrap","operation","fallback","hasSupport","storage","e","cache","setItem","removeItem","err","COOKIE","isSupported","hasCookies","getCookie","cookie","setCookie","removeCookie","tmp","document","indexOf","ttl","path","domain","secure","isSet","arguments","length","encodeURIComponent","Date","toUTCString","decodeURIComponent","split","LOCAL_STORAGE","hasLocalStorage","SESSION_STORAGE","hasSessionStorage","parse","input","JSON","obj","isObjectLike","proto","isObject","parseFloat","hasStorage","hasSessionSupport","hasCookiesSupport","getItem","options","getStorageType","getFirst","useAll","localValue","useLocal","localStorage","undefined","cookieVal","useCookie","sessionVal","useSession","sessionStorage","globalValue","data","saveValue","stringify","setFirst","format","values","useType","opts","location","current","previous"],"mappings":"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"}